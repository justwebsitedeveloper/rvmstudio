$("body").imagesLoaded(function(){function e(){$("#hzsection").removeClass("horizontal-scroll-section").removeClass("horizontal-scroll-section--init").addClass("hz1").attr("style",""),$("#hzscene").removeClass("scene").removeClass("scene--active").removeClass("scene-ended").addClass("hz2"),$("#hzwrapper").removeClass("horizontal-scroll-section__content-wrapper").addClass("hz3").attr("style",""),$("#hzinner").removeClass("horizontal-sections").addClass("hz4")}function t(){let e=0,t=!1;document.createElement("div");document.querySelector(".horizontal-scroll-section__content-wrapper").addEventListener("wheel",function(a){e=a.deltaX,t||window.requestAnimationFrame(function(){!function(e){var t=$(window).scrollTop();$(window).scrollTop(t+e)}(e),t=!1}),t=!0},{passive:!0})}function a(){var a=$(window).scrollTop(),n=window.innerHeight,o=window.innerWidth;o<1300?e():($("#hzsection").addClass("horizontal-scroll-section").removeClass("hz1"),$("#hzscene").addClass("scene").removeClass("hz2"),$("#hzwrapper").addClass("horizontal-scroll-section__content-wrapper").removeClass("hz3"),$("#hzinner").addClass("horizontal-sections").removeClass("hz4"),t());var r="scene--active",s="scene--ended";function i(e){var t=e.data("elDom").getBoundingClientRect();t.top>n?(e.find(".scene").removeClass(r),e.find(".scene").removeClass(s)):t.bottom<0?(e.find(".scene").addClass(s),e.find(".scene").removeClass(r)):(t.top<=0&&e.find(".scene").addClass(r),t.top>0&&e.find(".scene").removeClass(r),t.bottom<=n&&e.find(".scene").addClass(s),t.bottom>n&&e.find(".scene").removeClass(s))}$(window).on("resize",function(){n=window.innerHeight,(o=window.innerWidth)<1300?e():($("#hzsection").addClass("horizontal-scroll-section").removeClass("hz1"),$("#hzscene").addClass("scene").removeClass("hz2"),$("#hzwrapper").addClass("horizontal-scroll-section__content-wrapper").removeClass("hz3"),$("#hzinner").addClass("horizontal-sections").removeClass("hz4"))});var d=$(".horizontal-scroll-section"),l=d.find(".trigger");d.each(function(e,t){var a=$(this);$(this).data("elDom",$(this).get(0)),function(e){var t=e.attr("class"),a=e.find("."+t+"__content-wrapper"),n=a.get(0);e.data("contentWrapper",a),e.data("contentWrapperDom",n);var r=e.data("contentWrapperDom").scrollWidth;e.data("contentWrapperScrollWidth",r);var s=-(e.data("contentWrapperScrollWidth")-o);e.data("rightMax",Number(s)),e.data("initalized",!1),e.css("height",e.data("contentWrapperScrollWidth")),e.data("outerHeight",e.outerHeight()),e.data("offsetTop",e.offset().top),e.data("initalized",!0),e.data("transformX","0"),e.addClass(e.attr("class")+"--init")}($(this)),i($(this)),$(window).on("resize",function(){var e,t;t=(e=a).data("contentWrapperDom").scrollWidth,e.data("contentWrapperScrollWidth",t),rightMax=e.data("contentWrapperScrollWidth")-o,rightMaxMinus=-rightMax,e.data("rightMax",Number(rightMaxMinus)),e.css("height",e.data("contentWrapperScrollWidth")),e.data("outerHeight",e.outerHeight()),e.data("offsetTop",e.offset().top),e.data("transformX")<=e.data("rightMax")&&e.data("contentWrapper").css({transform:"translate3d("+e.data("rightMax")+"px, 0, 0)"}),i(a)})}),l.each(function(e,t){var a,n,o,r;a=$(this),n=$(this).closest(".horizontal-scroll-section"),o=-a.parent().position().left,r=(r=a.data("triggerOffset"))?r=r:.5,a.data("triggerOffset",r),a.data("triggerPositionLeft",o),a.data("triggerSection",n)}),$(window).on("scroll",function(){a=$(window).scrollTop(),d.each(function(e,t){var r,s;r=$(this),s=-(a-r.data("offsetTop"))/(r.data("outerHeight")-(n-o))*r.data("contentWrapperScrollWidth"),s=Math.min(0,s),s=Math.max(s,r.data("rightMax")),r.data("transformX",Number(s)),1==r.data("initalized")&&r.data("contentWrapper").css({transform:"translate3d("+r.data("transformX")+"px, 0, 0)"}),i($(this))}),l.each(function(e,t){var a;(a=$(this)).data("triggerSection").data("transformX")<=a.data("triggerPositionLeft")*a.data("triggerOffset")?a.data("triggerSection").addClass(a.data("class")):!1!==a.data("remove-class")&&a.data("triggerSection").removeClass(a.data("class"))})})}$("body").addClass("loaded"),$(function(){void 0===window.ontouchstart?a():e(),$(window).on("resize",function(){a()})})}),$(window).on("beforeunload",function(){$("html").remove()});var waves=new SineWaves({el:document.getElementById("waves"),speed:.5,width:function(){return $(window).width()},height:function(){return $(window).height()},ease:"SineInOut",wavesWidth:"200%",waves:[{timeModifier:1,lineWidth:1,amplitude:80,wavelength:140,segmentLength:20,strokeStyle:"rgba(230, 14, 137, 1)"},{timeModifier:2,lineWidth:1,amplitude:150,wavelength:200,segmentLength:20,strokeStyle:"rgba(61, 188, 237, 1)"},{timeModifier:4,lineWidth:1,amplitude:130,wavelength:130,segmentLength:20,strokeStyle:"rgba(255, 213, 62, 1)"},{timeModifier:3,lineWidth:1,amplitude:150,wavelength:400,segmentLength:40,strokeStyle:"rgba(0, 0, 0, 1)"}]});$(".flipbook").turn({width:922,height:600,elevation:50,gradients:!0});var playerSettings={controls:["play-large","play","progress","current-time","mute","fullscreen"],resetOnEnd:!0,hideControls:!0,autopause:!0,clickToPlay:!0,keyboard:!1};const players=Plyr.setup(".js-player",playerSettings);players.forEach(function(e,t){e.on("play",function(){players.forEach(function(t,a){e!=t&&t.pause()})})}),window.onscroll=function(){myFunction()};var scroller=document.querySelector(".scroll-indication");function myFunction(){window.pageYOffset>100?scroller.classList.add("hide-indicator"):scroller.classList.remove("hide-indicator")}const keys=document.querySelectorAll(".key"),sonnetCounter=[5,12,21,26,31,36,43,48,57,62];var counter=0;function playNote(e){const t=document.querySelector(`audio[data-key="${e}"]`),a=document.querySelector('audio[data-key="final"]'),n=document.querySelector(`.key[data-key="${e}"]`);if(n){if(counter+=parseInt(e),sonnetCounter.includes(counter)||(counter=0),57==counter||62==counter)return counter=0,n.classList.add("playing"),a.currentTime=0,void a.play();n.classList.add("playing"),t.currentTime=0,t.play()}}function removeTransition(e){"transform"===e.propertyName&&this.classList.remove("playing")}keys.forEach(e=>e.addEventListener("transitionend",removeTransition)),$(".key").click(function(){playNote(this.dataset.key)});